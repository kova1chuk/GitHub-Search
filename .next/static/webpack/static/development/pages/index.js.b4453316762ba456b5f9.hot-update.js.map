{"version":3,"file":"static/webpack/static/development/pages/index.js.b4453316762ba456b5f9.hot-update.js","sources":["webpack:///./pages/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport searchReposActions from \"store/repoSearch/actions\";\nimport { Header, Pagination, SearchResult } from \"components\";\n\nfunction HomePage({ total_count, repos, fetchSearch }) {\n  const [curPage, setCurPage] = useState(1);\n  const [curRequest, setCurRequest] = useState(\"\");\n  const [loading, setloading] = useState(false);\n\n  const onSearch = (request: string) => {\n    setloading(true);\n    setCurRequest(request);\n    fetchSearch({\n      q: request,\n      sort: \"stars\",\n      order: \"desc\",\n      per_page: 30,\n      page: curPage,\n    });\n    setCurPage(1);\n  };\n\n  const onPaginationClick = (value) => {\n    setloading(true);\n    if (value === \"Previous\") {\n      if (curPage !== 1) setCurPage(curPage - 1);\n    } else if (value === \"Next\") {\n      if (curPage !== Math.floor(total_count / 30)) setCurPage(curPage + 1);\n    } else if (curPage.toString !== value) {\n      setCurPage(Number(value));\n    }\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(() => {\n    if (curRequest === \"\") return;\n    fetchSearch({\n      q: curRequest,\n      sort: \"stars\",\n      order: \"desc\",\n      per_page: 30,\n      page: curPage,\n    });\n    setloading(true);\n  }, [curPage]);\n\n  useEffect(() => {\n    setloading(false);\n  }, [repos]);\n\n  return (\n    <>\n      <Header onSearch={onSearch} />\n      {repos && !loading && (\n        <>\n          <SearchResult total_count={total_count} repos={repos} />\n          <div className=\"content-center\">\n            <Pagination\n              count={Math.floor(total_count / 30)}\n              current={curPage}\n              onClick={onPaginationClick}\n            />\n          </div>\n        </>\n      )}\n      {loading && (\n        <div className=\"content-center\">\n          <h3>Loading...</h3>\n        </div>\n      )}\n    </>\n  );\n}\n\nconst mapStateToProps = ({ repoSearchReducer }) => ({\n  total_count: repoSearchReducer.total_count,\n  repos: repoSearchReducer.repos,\n});\nconst mapDispatchToProps = { fetchSearch: searchReposActions.fetchSearch };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AAGA;AAAA;AAAA;AAEA;;;;A","sourceRoot":""}