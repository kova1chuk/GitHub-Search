{"ast":null,"code":"var _jsxFileName = \"/home/oleksii/Documents/bettermetest/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport searchReposActions from \"store/repoSearch/actions\";\nimport { Header, Pagination, SearchResult } from \"components\";\n\nfunction HomePage(_ref) {\n  var total_count = _ref.total_count,\n      repos = _ref.repos,\n      fetchSearch = _ref.fetchSearch;\n\n  var _useState = useState(1),\n      curPage = _useState[0],\n      setCurPage = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      curRequest = _useState2[0],\n      setCurRequest = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setloading = _useState3[1];\n\n  var onSearch = function onSearch(request) {\n    setCurRequest(request);\n    fetchSearch({\n      q: request,\n      sort: \"stars\",\n      order: \"desc\",\n      per_page: 30,\n      page: curPage\n    });\n    setCurPage(1);\n    setloading(true);\n  };\n\n  var onPaginationClick = function onPaginationClick(value) {\n    if (value === \"Previous\") {\n      if (curPage !== 1) setCurPage(curPage - 1);\n    } else if (value === \"Next\") {\n      if (curPage !== Math.floor(total_count / 30)) setCurPage(curPage + 1);\n    } else if (curPage.toString !== value) {\n      setCurPage(Number(value));\n    }\n\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(function () {\n    if (curRequest === \"\") return;\n    fetchSearch({\n      q: curRequest,\n      sort: \"stars\",\n      order: \"desc\",\n      per_page: 30,\n      page: curPage\n    });\n    setloading(true);\n  }, [curPage]);\n  useEffect(function () {\n    setloading(false);\n  }, [repos]);\n  return __jsx(React.Fragment, null, __jsx(Header, {\n    onSearch: onSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }), repos && !loading && __jsx(React.Fragment, null, __jsx(SearchResult, {\n    total_count: total_count,\n    repos: repos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, __jsx(Pagination, {\n    count: Math.floor(total_count / 30),\n    current: curPage,\n    onClick: onPaginationClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }))), loading && __jsx(\"div\", {\n    className: \"content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"Loading\")));\n}\n\nvar mapStateToProps = function mapStateToProps(_ref2) {\n  var repoSearchReducer = _ref2.repoSearchReducer;\n  return {\n    total_count: repoSearchReducer.total_count,\n    repos: repoSearchReducer.repos\n  };\n};\n\nvar mapDispatchToProps = {\n  fetchSearch: searchReposActions.fetchSearch\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);","map":{"version":3,"sources":["/home/oleksii/Documents/bettermetest/pages/index.tsx"],"names":["React","useState","useEffect","connect","searchReposActions","Header","Pagination","SearchResult","HomePage","total_count","repos","fetchSearch","curPage","setCurPage","curRequest","setCurRequest","loading","setloading","onSearch","request","q","sort","order","per_page","page","onPaginationClick","value","Math","floor","toString","Number","window","scrollTo","mapStateToProps","repoSearchReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport searchReposActions from \"store/repoSearch/actions\";\nimport { Header, Pagination, SearchResult } from \"components\";\n\nfunction HomePage({ total_count, repos, fetchSearch }) {\n  const [curPage, setCurPage] = useState(1);\n  const [curRequest, setCurRequest] = useState(\"\");\n  const [loading, setloading] = useState(false);\n\n  const onSearch = (request: string) => {\n    setCurRequest(request);\n    fetchSearch({\n      q: request,\n      sort: \"stars\",\n      order: \"desc\",\n      per_page: 30,\n      page: curPage,\n    });\n    setCurPage(1);\n    setloading(true);\n  };\n\n  const onPaginationClick = (value) => {\n    if (value === \"Previous\") {\n      if (curPage !== 1) setCurPage(curPage - 1);\n    } else if (value === \"Next\") {\n      if (curPage !== Math.floor(total_count / 30)) setCurPage(curPage + 1);\n    } else if (curPage.toString !== value) {\n      setCurPage(Number(value));\n    }\n    window.scrollTo(0, 0);\n  };\n\n  useEffect(() => {\n    if (curRequest === \"\") return;\n    fetchSearch({\n      q: curRequest,\n      sort: \"stars\",\n      order: \"desc\",\n      per_page: 30,\n      page: curPage,\n    });\n    setloading(true);\n  }, [curPage]);\n\n  useEffect(() => {\n    setloading(false);\n  }, [repos]);\n\n  return (\n    <>\n      <Header onSearch={onSearch} />\n      {repos && !loading && (\n        <>\n          <SearchResult total_count={total_count} repos={repos} />\n          <div className=\"content-center\">\n            <Pagination\n              count={Math.floor(total_count / 30)}\n              current={curPage}\n              onClick={onPaginationClick}\n            />\n          </div>\n        </>\n      )}\n      {loading && (\n        <div className=\"content-center\">\n          <h3>Loading</h3>\n        </div>\n      )}\n    </>\n  );\n}\n\nconst mapStateToProps = ({ repoSearchReducer }) => ({\n  total_count: repoSearchReducer.total_count,\n  repos: repoSearchReducer.repos,\n});\nconst mapDispatchToProps = { fetchSearch: searchReposActions.fetchSearch };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\n"]},"metadata":{},"sourceType":"module"}